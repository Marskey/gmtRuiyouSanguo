!function(t){"use strict";var a=!1,o=t.fn.bootstrapTable.utils.sprintf,n=function(a,n,i,s,r){if(t("#avdSearchModal_"+r.options.idTable).hasClass("modal"))t("#avdSearchModal_"+r.options.idTable).modal();else{var l=o('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+r.options.idTable);l+='<div class="modal-dialog modal-xs">',l+=' <div class="modal-content">',l+='  <div class="modal-header">',l+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>',l+=o('   <h4 class="modal-title">%s</h4>',n),l+="  </div>",l+='  <div class="modal-body modal-body-custom">',l+=o('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+r.options.idTable),l+="   </div>",l+="  </div>",l+="  </div>",l+=" </div>",l+="</div>",t("body").append(t(l));var d=e(a,i,s,r);t("#avdSearchModalContent_"+r.options.idTable).append(d.join("")),t("#"+r.options.idForm).off("blur","input").on("blur","input",function(t){r.onColumnAdvancedSearch(t)}),t("#btnConfirmAvd_"+r.options.idTable).click(function(a){r.options.pageNumber=1,r.updatePagination(),r.onBtnColumnAdvancedSearch(),t("#avdSearchModal_"+r.options.idTable).modal("hide")}),t("#btnClearAvd").click(function(){t("#avdSearchModal_"+r.options.idTable+" input").each(function(){t(this).val("")}),r.filterColumnsPartial=null}),t("#avdSearchModal_"+r.options.idTable).modal()}},e=function(t,a,n,e){var i=[];i.push(o('<form class="form-horizontal" id="%s" action="%s" >',e.options.idForm,e.options.actionForm));for(var s in t){var r=t[s];!r.checkbox&&r.visible&&r.searchable&&(i.push('<div class="form-group">'),i.push(o('<label class="col-sm-4 control-label">%s</label>',r.title)),i.push('<div class="col-sm-6">'),i.push(o('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',r.field,r.title,r.field)),i.push("</div>"),i.push("</div>"))}return i.push('<div class="form-group">'),i.push('<div class="col-sm-6">'),i.push(o('<button type="button" id="btnConfirmAvd%s" style="margin-bottom:15px" class="form-control btn btn-primary" >%s</button>',"_"+e.options.idTable,a)),i.push("</div>"),i.push('<div class="col-sm-6">'),i.push(o('<button type="button" id="btnClearAvd" class="form-control btn btn-default" >%s</button>',n)),i.push("</div>"),i.push("</div>"),i.push("</form>"),i};t.extend(t.fn.bootstrapTable.defaults,{advancedSearch:!1,idForm:"advancedSearch",actionForm:"",idTable:void 0,onColumnAdvancedSearch:function(t,a){return!1},onBtnColumnAdvancedSearch:function(t){return!1}}),t.extend(t.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-filter"}),t.extend(t.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"}),t.extend(t.fn.bootstrapTable.Constructor.EVENTS,{"btn-column-advanced-search.bs.table":"onBtnColumnAdvancedSearch"}),t.extend(t.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Filter"},formatAdvancedConfirmButton:function(){return"Confirm"},formatAdvancedClearButton:function(){return"Clear"}}),t.extend(t.fn.bootstrapTable.defaults,t.fn.bootstrapTable.locales);var i=t.fn.bootstrapTable.Constructor,s=i.prototype.initToolbar,r=i.prototype.load,l=i.prototype.initSearch;i.prototype.initToolbar=function(){if(s.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch&&this.options.idTable){var t=this,a=[];a.push(o('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign)),a.push(o('<button class="btn btn-default%s" type="button" name="advancedSearch" aria-label="advanced search" title="%s">',void 0===t.options.iconSize?"":" btn-"+t.options.iconSize,t.options.formatAdvancedSearch())),a.push(o('<i class="%s %s"></i>',t.options.iconsPrefix,t.options.icons.advancedSearchIcon)),a.push("</button></div>"),t.$toolbar.prepend(a.join("")),t.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){n(t.columns,t.options.formatAdvancedSearch(),t.options.formatAdvancedConfirmButton(),t.options.formatAdvancedClearButton(),t)})}},i.prototype.load=function(o){if(r.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch&&"undefined"!=typeof this.options.idTable&&!a){var n=parseInt(t(".bootstrap-table").height());n+=10,t("#"+this.options.idTable).bootstrapTable("resetView",{height:n}),a=!0}},i.prototype.initSearch=function(){if(l.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch){var a=this,o=t.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=o?t.grep(this.data,function(n,e){for(var i in o){var s=o[i].toLowerCase(),r=n[i];if(r=t.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[t.inArray(i,a.header.fields)],[r,n,e],r),-1===t.inArray(i,a.header.fields)||"string"!=typeof r&&"number"!=typeof r||-1===(r+"").toLowerCase().indexOf(s))return!1}return!0}):this.data}},i.prototype.onColumnAdvancedSearch=function(a){var o=t.trim(t(a.currentTarget).val()),n=t(a.currentTarget)[0].id;t.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),o?this.filterColumnsPartial[n]=o:delete this.filterColumnsPartial[n],this.trigger("column-advanced-search",n,o)},i.prototype.onBtnColumnAdvancedSearch=function(){var t="";this.filterColumnsPartial&&(t=JSON.stringify(this.filterColumnsPartial)),this.trigger("btn-column-advanced-search",t)}}(jQuery);
