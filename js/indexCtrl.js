app.controller("indexCtrl",["$scope","$location","$rootScope","userService","inspireService",function(e,t,o,a,i){switch(a.setActive(),$.material.init(),e.userid=o.user.id,isLogedIn=o.user.id>0,e.admins=["856","14049"],e.isAdmin=!0,e.dateCurrent=new Date,-1===e.admins.indexOf(e.userid)&&(e.isAdmin=!1),e.checkoutPrototypeAccounts=5,e.totalTeamPrice=95,e.pricingRedirect="",$(".pricing-plan-feature-list").hide(),e.showLoginForm=!0,e.showForgotPasswordForm=!1,e.toggleLoginForm=function(){e.showLoginForm=!0,e.showForgotPasswordForm=!1},e.toggleForgotPasswordForm=function(){e.showLoginForm=!1,e.showForgotPasswordForm=!0,""!==$("#loginModal #loginId").val()&&(e.forgotPasswordId=$("#loginModal #loginId").val(),$("#forgotPasswordId").parent().addClass("is-focused"))},e.changePricingRedirect=function(t){e.pricingRedirect=t},e.$on("ngRepeatFinished",function(e,t){t.hasClass("dropdown-menu-li")&&$(".scrollspy").scrollSpy()}),t.path()){case"/forgotpwd":$("#loginModal").modal("show"),e.toggleForgotPasswordForm();break;case"/compare":$(".chatbot-layover").addClass("active"),$("#chatBotContainer").css({height:"100%"}).toggleClass("active");break;case"/happy-birthday-usa":window.location.href="/happy-birthday-usa.php"}e.setRefCode=function(){var t=$("#refCode"),o=$("#refCodeBy");t.length>0&&o.length>0&&(t=t.attr("data-val"),o=o.attr("data-val"),t.length>0&&o.length>0&&(localStorage.setItem("ref-code",t),localStorage.setItem("ref-code-by",o))),e.refCode=null==localStorage.getItem("ref-code")?"":localStorage.getItem("ref-code"),e.refCodeBy=null==localStorage.getItem("ref-code-by")?"":localStorage.getItem("ref-code-by")},e.setRefCode(),$(window).scroll(function(){var e=$(window).scrollTop();e>=2?($(".headerWrapper").addClass("fixed-navbar"),$("header").css({padding:"15px 0",height:"70px"})):($(".headerWrapper").removeClass("fixed-navbar"),$("header").css({padding:"25px 0",height:"90px"}))}),$("#openVideo").on("click",function(){$("#iframe").attr("src","https://www.youtube.com/embed/XBQqJmtr8vQ?rel=0&autoplay=1")}),$("#closeIframe").on("click",function(){$("#iframe").attr("src","")}),$("body").on("click",".lean-overlay",function(){$("#iframe").attr("src","")}),e.focusLoginForm=function(){e.toggleLoginForm(),window.setTimeout(function(){$("input[name='loginId']").trigger("focus")},300)},e.logout=function(){a.logout().then(function(e){"success"==e.data.result&&(window.localStorage.isPaymentInitiatorAllow=!1,window.location.href="index.php")},function(e){window.localStorage.isPaymentInitiatorAllow=!1,window.location.href="index.php"})},e.togglePricingFeature=function(){$(".pricing-plan-feature-list").toggle(300),"Less Details"==$(".pricing-plan-feature-toggle:first").text()?$(".pricing-plan-feature-toggle").text("More Details"):$(".pricing-plan-feature-toggle").text("Less Details")},e.showNavMobile=function(t){$("#sidebar-wrapper").css({width:"100%",padding:"20%"}),e.showBackDrop=!0},e.hideNavMobile=function(t){$("#sidebar-wrapper").css({width:"0px",padding:"0"}),e.showBackDrop=!1},e.playIntroVideo=function(e){$(".video-content").addClass("hidden"),$(".video-container iframe").removeClass("hidden"),$(".video-container iframe").attr("src",e);try{-1!==window.location.host.indexOf("canvasflip.com")&&Intercom("trackEvent","Watched Intro Video")}catch(e){}},e.playSpecsIntroVideo=function(){$(".specs-video-container iframe").removeClass("hidden"),$(".specs-video-container iframe").attr("src","https://www.youtube-nocookie.com/embed/KsyiF3XyfZg?rel=0&amp;showinfo=0&amp;autoplay=1&amp;vq=hd720&amp;hd=1");try{-1!==window.location.host.indexOf("canvasflip.com")&&Intercom("trackEvent","Watched Specs Intro Video")}catch(e){}},$("#introVideoFull").on("show.bs.modal",function(){$("#iframeIntroVideo").attr("src","https://www.youtube-nocookie.com/embed/Iuoz0HnwTyg?rel=0&amp;showinfo=0&amp;autoplay=1&amp;vq=hd720&amp;hd=1");try{-1!==window.location.host.indexOf("canvasflip.com")&&Intercom("trackEvent","Watched Intro Video")}catch(e){}}),$("#introVideoFull").on("hide.bs.modal",function(){$("#iframeIntroVideo").attr("src","")}),e.calculatePrototypingAccount=function(t){"add"==t&&e.checkoutPrototypeAccounts<=99?(e.checkoutPrototypeAccounts++,e.totalTeamPrice=e.totalTeamPrice+19):"remove"==t&&e.checkoutPrototypeAccounts>2&&(e.checkoutPrototypeAccounts--,e.totalTeamPrice=e.totalTeamPrice-19)},i.getInspireData().then(function(t){"success"==t.data.result&&($.each(t.data.projectData,function(){e.setProjectProperties(this)}),e.projectsLoaded=!0,e.projects=t.data.projectData,e.projectsCount="("+t.data.projectData.length+")")},function(e){}),e.setProjectProperties=function(t){t.created_at=new Date(t.appdatecreated.replace(/-/g,"/")+" UTC"),t.filter=!0,t.appFlowType=!0,t.appname=encodeURIComponent(t.appname),t.appcategory=encodeURIComponent(t.appcategory),e.datePrototype=new Date(t.appdatecreated.replace(/-/g,"/")+" UTC"),e.timeDiff=Math.abs(e.datePrototype.getTime()-e.dateCurrent.getTime()),e.diffDays=Math.floor(e.timeDiff/864e5),t.diffDays=e.diffDays},e.$on("ngRepeatFinished",function(e,t){switch(t.attr("data-render")){case"inspireProjects":$("#inspireProjects .timeago").timeago()}}),e.downloadSketchPlugin=function(){try{-1!==window.location.host.indexOf("canvasflip.com")&&Intercom("trackEvent","Downloaded Sketch Plugin")}catch(e){}},e.onTabMenuClick=function(e,t,o){e.preventDefault();var a=$(e.currentTarget);(o=$('section[data-section-for="'+o+'"]')).find("li.active").removeClass("active"),a.addClass("active"),o.find("li.slider").css({width:a.outerWidth(),left:a.position().left-o.find("ul").position().left}),o.find("div.feature-active").removeClass("feature-active").addClass("feature-inactive"),o.find('div[data-partial="'+t+'"]').removeClass("feature-inactive").addClass("feature-active")},e.initNavbarMenu=function(){setTimeout(function(){$(".tab-navbar li.active").trigger("click")},3e3)},e.downloadSpecsPlugin=function(e){"sketch"===e.currentTarget.getAttribute("data-type")?window.location.href="protected/sketch/canvasflip-sketch-plugin.zip":window.open("https://canvasflipsurvey.typeform.com/to/O5Umuh");try{-1!==window.location.host.indexOf("canvasflip.com")&&Intercom("trackEvent","Downloaded Sketch Plugin")}catch(e){}}}]);